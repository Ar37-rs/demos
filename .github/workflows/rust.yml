name: Build

on:
  push:
    branches: [ master ]
  pull_request:
    branches: [ master ]

jobs:
  build:

    runs-on: ${{ matrix.os }}
    strategy:
      matrix:
        os: [ubuntu-18.04]
    
    steps:
    - name: Download deps
      run: |
         if [ "$RUNNER_OS" == "Linux" ]; then
          sudo apt-get update && sudo apt-get install -y libpango1.0-dev libx11-dev libxext-dev libxft-dev libxinerama-dev libxcursor-dev libxrender-dev libxfixes-dev ninja-build
         fi
         cd /home/runner/demos/demos/calendar && cargo build --verbose
         cd /home/runner/demos/demos/csv && cargo build --verbose
         cd /home/runner/demos/demos/femtovg && cargo build --verbose
         cd /home/runner/demos/demos/ffmpeg && cargo build --verbose
         cd /home/runner/demos/demos/framebuffer && cargo build --verbose
         cd /home/runner/demos/demos/glium && cargo build --verbose
         cd /home/runner/demos/demos/glow && cargo build --verbose
         cd /home/runner/demos/demos/glut && cargo build --verbose
         cd /home/runner/demos/demos/image && cargo build --verbose
         cd /home/runner/demos/demos/libvlc && cargo build --verbose
         cd /home/runner/demos/demos/mpv && cargo build --verbose
         cd /home/runner/demos/demos/musicplayer && cargo build --verbose
         cd /home/runner/demos/demos/opengl && cargo build --verbose
         cd /home/runner/demos/demos/pixels && cargo build --verbose
         cd /home/runner/demos/demos/plotters && cargo build --verbose
         cd /home/runner/demos/demos/raqote && cargo build --verbose
         cd /home/runner/demos/demos/rounded-svg && cargo build --verbose
         cd /home/runner/demos/demos/speedy2d && cargo build --verbose
         cd /home/runner/demos/demos/systray && cargo build --verbose
         cd /home/runner/demos/demos/tinyskia && cargo build --verbose
         cd /home/runner/demos/demos/web-todo && cargo build --verbose
         cd /home/runner/demos/demos/web-todo2 && cargo build --verbose
         cd /home/runner/demos/demos/webview && cargo build --verbose
         cd /home/runner/demos/demos/wgpu && cargo build --verbose
         cd /home/runner/demos/demos/xterm && cargo build --verbose
      shell: bash
    - uses: actions/checkout@v2
